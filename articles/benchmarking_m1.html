<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Benchmarking M1 • fio</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Benchmarking M1">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fio</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.6.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/albersonmiranda/fio" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Benchmarking M1</h1>
            
            <h4 data-toc-skip class="date">June 17, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/albersonmiranda/fio/blob/main/vignettes/articles/benchmarking_m1.Rmd" class="external-link"><code>vignettes/articles/benchmarking_m1.Rmd</code></a></small>
      <div class="hidden name"><code>benchmarking_m1.Rmd</code></div>

    </div>

    
    
<!-- This is a precomputing script. To run it, `knitr::knit("vignettes/articles/benchmarking_m1_orig.Rmd.orig", output = "vignettes/articles/benchmarking_m1.Rmd")` -->
<style>
p.caption {
  font-size: 0.6em;
  text-align: "center";
}
</style>
<div class="section level2">
<h2 id="disclaimer">DISCLAIMER<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>The present benchmark was conducted on 2025-06-17 on a Macbook Air M1
(8-core CPU, 7-core GPU, 8GB RAM). Results <em>will</em> vary depending
on the hardware. These benchmarks aim to provide a general idea of the
performance differences between the <code>fio</code> package and other
implementations but should not be considered definitive. The performance
of the functions may also vary depending on the specific data used and
the context in which they are applied.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette presents a benchmarking analysis comparing the
performance of functions from the <code>fio</code> package with
equivalent base R functions and functions from other packages. The
<code>fio</code> package provides a set of functions for input-output
analysis, a method used in economics to analyze the interdependencies
between different sectors of an economy.</p>
<p>Our benchmarking tests show that <code>fio</code> package functions
are either faster or more memory-efficient than other implementations.
This improved performance can make a substantial difference in larger
analyses, making the <code>fio</code> package a valuable tool for
input-output analysis in R.</p>
<p>The tests were run on simulated square matrices, with dimensions
ranging from 100x100 up to 2000x2000, and each test was repeated at
least 50 times to account for variability. Please note that the results
of this benchmarking analysis depend on the specific test datasets used
and the hardware on which the algorithms were run. Therefore, the
results should be interpreted in the context of these specific
conditions.</p>
</div>
<div class="section level2">
<h2 id="technical-coefficients-matrix">Technical coefficients matrix<a class="anchor" aria-label="anchor" href="#technical-coefficients-matrix"></a>
</h2>
<p>The technical coefficients matrix calculation, a key and initial step
in input-output analysis, was tested using the
<code>compute_tech_coeff()</code> function from the <a href="https://albersonmiranda.github.io/fio/">fio</a>
package, equivalent functions from the <a href="https://github.com/pachadotdev/leontief" class="external-link">leontief</a> package,
and a base R implementation. It consists of dividing each
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">a_{ij}</annotation></semantics></math>
element of the intermediate transactions matrix by the corresponding
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mi>j</mi></msub><annotation encoding="application/x-tex">x_j</annotation></semantics></math>
element of the total production vector<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>Results shows that {fio} is generally faster and uses significantly
less memory than the other two implementations, especially for larger
matrices (≥500x500). The memory usage of {fio} is approximately half
that of Base R and 12% of that used by {leontief}.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base R function</span></span>
<span><span class="va">tech_coeff_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">tech_coeff_matrix</span> <span class="op">&lt;-</span> <span class="va">intermediate_transactions</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">total_production</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">tech_coeff_matrix</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># benchmark</span></span>
<span><span class="va">benchmark_a</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  matrix_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">intermediate_transactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">matrix_dim</span><span class="op">^</span><span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="va">matrix_dim</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">total_production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">4000000</span><span class="op">:</span><span class="fl">6000000</span>, <span class="va">matrix_dim</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">iom_fio</span> <span class="op">&lt;-</span> <span class="fu">fio</span><span class="fu">::</span><span class="va"><a href="../reference/iom.html">iom</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"iom"</span>, <span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      fio <span class="op">=</span> <span class="fu">fio</span><span class="fu">:::</span><span class="fu">compute_tech_coeff</span><span class="op">(</span><span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span>,</span>
<span>      `Base R` <span class="op">=</span> <span class="fu">tech_coeff_r</span><span class="op">(</span><span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span>,</span>
<span>      leontief <span class="op">=</span> <span class="fu">leontief</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/leontief/man/input_requirement.html" class="external-link">input_requirement</a></span><span class="op">(</span><span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">100</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running with:</span></span>
<span><span class="co">#&gt;   matrix_dim</span></span>
<span><span class="co">#&gt; 1        100</span></span>
<span><span class="co">#&gt; 2        500</span></span>
<span><span class="co">#&gt; 3       1000</span></span>
<span><span class="co">#&gt; 4       2000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">benchmark_a</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 9</span></span>
<span><span class="co">#&gt;    expression matrix_dim      min   median mem_alloc `gc/sec` n_itr  n_gc total_time</span></span>
<span><span class="co">#&gt;    &lt;bch:expr&gt;      &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;bch:tm&gt;</span></span>
<span><span class="co">#&gt;  1 fio               100  37.88µs  80.81µs  861.83KB      0     100     0     9.05ms</span></span>
<span><span class="co">#&gt;  2 Base R            100  55.97µs  61.34µs  190.65KB      0     100     0     7.66ms</span></span>
<span><span class="co">#&gt;  3 leontief          100 178.15µs 211.85µs  706.38KB     47.3    99     1    21.14ms</span></span>
<span><span class="co">#&gt;  4 fio               500  509.3µs 858.87µs    1.91MB     63.2    95     5    79.12ms</span></span>
<span><span class="co">#&gt;  5 Base R            500   1.76ms   2.78ms    3.82MB     35.5    90    10   281.61ms</span></span>
<span><span class="co">#&gt;  6 leontief          500   2.79ms   3.11ms   16.29MB    566.     38    67   118.47ms</span></span>
<span><span class="co">#&gt;  7 fio              1000   2.92ms   3.52ms    7.63MB     43.9    86    14   318.96ms</span></span>
<span><span class="co">#&gt;  8 Base R           1000  11.04ms  17.42ms   15.27MB     34.1    65    35      1.03s</span></span>
<span><span class="co">#&gt;  9 leontief         1000  12.27ms  12.27ms      65MB  12149.      1   149    12.27ms</span></span>
<span><span class="co">#&gt; 10 fio              2000  14.68ms  15.46ms   30.52MB     31.7    67    33      1.04s</span></span>
<span><span class="co">#&gt; 11 Base R           2000  76.97ms  98.06ms  61.05MB     21.8    32    68      3.12s</span></span>
<span><span class="co">#&gt; 12 leontief         2000  48.61ms  48.61ms  259.7MB   4073.      1   198    48.61ms</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">benchmark_a</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figure/benchmark_m1_a-1.png" alt="\label{fig:benchmark_a} For larger matrices (≥500x500), {fio} is generally faster and uses significantly less memory: approximately half that of Base R and 12% of that used by {leontief}."><p class="caption">
For larger matrices (≥500x500), {fio} is generally faster and uses
significantly less memory: approximately half that of Base R and 12% of
that used by {leontief}.
</p>
</div>
</div>
<div class="section level2">
<h2 id="leontief-inverse-matrix">Leontief inverse matrix<a class="anchor" aria-label="anchor" href="#leontief-inverse-matrix"></a>
</h2>
<p>The Leontief matrix
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>)
is obtained by subtracting the technical coefficients matrix
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>)
from the identity matrix
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>);
therefore, it has no null rows or columns. This allows for solving the
linear system
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>×</mo><msup><mi>L</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">L \times L^{-1} = I</annotation></semantics></math>
through LU decomposition, which is a more efficient method than direct
inverse matrix calculation.</p>
<p>Results shows that while {fio} is slightly slower, it demonstrates
superior memory efficiency, using less than half the memory of
alternatives.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base R function</span></span>
<span><span class="va">leontief_inverse_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">technical_coefficients_matrix</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">technical_coefficients_matrix</span><span class="op">)</span></span>
<span>  <span class="va">leontief_inverse_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span> <span class="op">-</span> <span class="va">technical_coefficients_matrix</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">leontief_inverse_matrix</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># benchmark</span></span>
<span><span class="va">benchmark_b</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  matrix_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">intermediate_transactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">matrix_dim</span><span class="op">^</span><span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="va">matrix_dim</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">total_production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">4000000</span><span class="op">:</span><span class="fl">6000000</span>, <span class="va">matrix_dim</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">iom_fio</span> <span class="op">&lt;-</span> <span class="fu">fio</span><span class="fu">::</span><span class="va"><a href="../reference/iom.html">iom</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"iom"</span>, <span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span></span>
<span>    <span class="va">iom_fio</span><span class="op">$</span><span class="fu">compute_tech_coeff</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">technical_coefficients_matrix</span> <span class="op">&lt;-</span> <span class="va">iom_fio</span><span class="op">$</span><span class="va">technical_coefficients_matrix</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      fio <span class="op">=</span> <span class="fu">fio</span><span class="fu">:::</span><span class="fu">compute_leontief_inverse</span><span class="op">(</span><span class="va">technical_coefficients_matrix</span><span class="op">)</span>,</span>
<span>      `Base R` <span class="op">=</span> <span class="fu">leontief_inverse_r</span><span class="op">(</span><span class="va">technical_coefficients_matrix</span><span class="op">)</span>,</span>
<span>      leontief <span class="op">=</span> <span class="fu">leontief</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/leontief/man/leontief_inverse.html" class="external-link">leontief_inverse</a></span><span class="op">(</span><span class="va">technical_coefficients_matrix</span><span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>      check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running with:</span></span>
<span><span class="co">#&gt;   matrix_dim</span></span>
<span><span class="co">#&gt; 1        100</span></span>
<span><span class="co">#&gt; 2        500</span></span>
<span><span class="co">#&gt; 3       1000</span></span>
<span><span class="co">#&gt; 4       2000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">benchmark_b</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 9</span></span>
<span><span class="co">#&gt;    expression matrix_dim      min   median mem_alloc `gc/sec` n_itr  n_gc total_time</span></span>
<span><span class="co">#&gt;    &lt;bch:expr&gt;      &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;bch:tm&gt;</span></span>
<span><span class="co">#&gt;  1 fio               100 161.58µs 392.45µs  158.51KB    0       100     0    42.34ms</span></span>
<span><span class="co">#&gt;  2 Base R            100 233.74µs  327.9µs  413.27KB    0       100     0    32.85ms</span></span>
<span><span class="co">#&gt;  3 leontief          100  233.5µs 327.26µs  402.57KB    0       100     0    31.14ms</span></span>
<span><span class="co">#&gt;  4 fio               500   5.97ms   7.81ms    3.81MB    1.27     99     1    788.2ms</span></span>
<span><span class="co">#&gt;  5 Base R            500   5.46ms   7.28ms    9.55MB    6.76     95     5   740.03ms</span></span>
<span><span class="co">#&gt;  6 leontief          500   5.63ms   7.68ms    9.55MB    5.32     96     4   752.23ms</span></span>
<span><span class="co">#&gt;  7 fio              1000  32.09ms  36.49ms   15.26MB    0.555    98     2       3.6s</span></span>
<span><span class="co">#&gt;  8 Base R           1000  27.86ms  32.78ms   38.18MB    6.11     83    17      2.78s</span></span>
<span><span class="co">#&gt;  9 leontief         1000  28.52ms   32.6ms   38.18MB    6.65     82    18      2.71s</span></span>
<span><span class="co">#&gt; 10 fio              2000 207.78ms 219.31ms   61.03MB    0.903    83    17     18.83s</span></span>
<span><span class="co">#&gt; 11 Base R           2000 181.47ms 189.29ms  152.66MB   45.3      11    95       2.1s</span></span>
<span><span class="co">#&gt; 12 leontief         2000  188.4ms 195.59ms  152.66MB   28.6      17    96      3.35s</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">benchmark_b</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figure/benchmark_m1_b-1.png" alt="\label{fig:benchmark_b} While slightly slower, {fio} demonstrates superior memory efficiency, using less than half the memory of alternatives for matrices 500x500 and larger."><p class="caption">
While slightly slower, {fio} demonstrates superior memory efficiency,
using less than half the memory of alternatives for matrices 500x500 and
larger.
</p>
</div>
</div>
<div class="section level2">
<h2 id="sensitivity-of-dispersion-coefficients-of-variation">Sensitivity of dispersion coefficients of variation<a class="anchor" aria-label="anchor" href="#sensitivity-of-dispersion-coefficients-of-variation"></a>
</h2>
<p>To evaluate the performance of linkage-based functions, we
benchmarked the sensitivity of dispersion coefficients of variation.</p>
<p>Results shows that {fio} is substantially faster and more
memory-efficient than {leontief} across all tested dimensions. Compared
to Base R, {fio} is faster for matrices 500x500 and larger, while memory
usage remains comparable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base R function</span></span>
<span><span class="va">sensitivity_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">B</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span></span>
<span>  <span class="va">SL</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span></span>
<span>  <span class="va">ML</span> <span class="op">=</span> <span class="va">SL</span> <span class="op">/</span> <span class="va">n</span></span>
<span>  <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="op">(</span><span class="va">B</span> <span class="op">-</span> <span class="va">ML</span><span class="op">)</span> <span class="op">**</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">**</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span> <span class="va">ML</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># benchmark</span></span>
<span><span class="va">benchmark_c</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  matrix_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">2000</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">intermediate_transactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">matrix_dim</span><span class="op">^</span><span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="va">matrix_dim</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">total_production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">4000000</span><span class="op">:</span><span class="fl">6000000</span>, <span class="va">matrix_dim</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">iom_fio</span> <span class="op">&lt;-</span> <span class="fu">fio</span><span class="fu">::</span><span class="va"><a href="../reference/iom.html">iom</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"iom"</span>, <span class="va">intermediate_transactions</span>, <span class="va">total_production</span><span class="op">)</span></span>
<span>    <span class="va">iom_fio</span><span class="op">$</span><span class="fu">compute_tech_coeff</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">compute_leontief_inverse</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">leontief_inverse_matrix</span> <span class="op">&lt;-</span> <span class="va">iom_fio</span><span class="op">$</span><span class="va">leontief_inverse_matrix</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      fio <span class="op">=</span> <span class="fu">fio</span><span class="fu">:::</span><span class="fu">compute_sensitivity_dispersion_cv</span><span class="op">(</span><span class="va">leontief_inverse_matrix</span><span class="op">)</span>,</span>
<span>      `Base R` <span class="op">=</span> <span class="fu">sensitivity_r</span><span class="op">(</span><span class="va">leontief_inverse_matrix</span><span class="op">)</span>,</span>
<span>      leontief <span class="op">=</span> <span class="fu">leontief</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/leontief/man/sensitivity_dispersion_cv.html" class="external-link">sensitivity_dispersion_cv</a></span><span class="op">(</span><span class="va">leontief_inverse_matrix</span><span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>      check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running with:</span></span>
<span><span class="co">#&gt;   matrix_dim</span></span>
<span><span class="co">#&gt; 1        100</span></span>
<span><span class="co">#&gt; 2        500</span></span>
<span><span class="co">#&gt; 3       1000</span></span>
<span><span class="co">#&gt; 4       2000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">benchmark_c</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 9</span></span>
<span><span class="co">#&gt;    expression matrix_dim      min   median mem_alloc `gc/sec` n_itr  n_gc total_time</span></span>
<span><span class="co">#&gt;    &lt;bch:expr&gt;      &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;bch:tm&gt;</span></span>
<span><span class="co">#&gt;  1 fio               100 106.72µs 186.63µs  81.23KB     0      100     0    19.72ms</span></span>
<span><span class="co">#&gt;  2 Base R            100  33.17µs  37.97µs  81.48KB     0      100     0      7.4ms</span></span>
<span><span class="co">#&gt;  3 leontief          100 725.25µs 767.52µs 745.38KB    12.8     99     1    78.18ms</span></span>
<span><span class="co">#&gt;  4 fio               500 580.23µs 700.08µs   1.91MB     0      100     0    70.24ms</span></span>
<span><span class="co">#&gt;  5 Base R            500 796.84µs  811.7µs   1.92MB     0      100     0    82.18ms</span></span>
<span><span class="co">#&gt;  6 leontief          500   15.3ms  16.95ms  17.31MB     3.09    95     5      1.62s</span></span>
<span><span class="co">#&gt;  7 fio              1000   1.92ms   2.37ms   7.64MB     0      100     0   236.42ms</span></span>
<span><span class="co">#&gt;  8 Base R           1000   2.99ms   3.32ms   7.66MB     6.13    98     2   326.19ms</span></span>
<span><span class="co">#&gt;  9 leontief         1000  93.56ms  97.73ms  68.94MB     2.23    82    18      8.06s</span></span>
<span><span class="co">#&gt; 10 fio              2000   8.37ms   8.88ms  30.53MB     0      100     0   887.34ms</span></span>
<span><span class="co">#&gt; 11 Base R           2000  13.09ms  13.21ms  30.58MB     7.47    91     9       1.2s</span></span>
<span><span class="co">#&gt; 12 leontief         2000 441.81ms 441.81ms 275.22MB   378.       1   167   441.81ms</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">benchmark_c</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figure/benchmark_m1_c-1.png" alt="\label{fig:benchmark_c} {fio} is substantially faster and more memory-efficient than {leontief} across all tested dimensions. Compared to Base R, {fio} is faster for matrices 500x500 and larger, while memory usage remains comparable."><p class="caption">
{fio} is substantially faster and more memory-efficient than {leontief}
across all tested dimensions. Compared to Base R, {fio} is faster for
matrices 500x500 and larger, while memory usage remains comparable.
</p>
</div>
</div>
<div class="section level2">
<h2 id="field-of-influence">Field of influence<a class="anchor" aria-label="anchor" href="#field-of-influence"></a>
</h2>
<p>Since computing the field of influence involves calculating the
Leontief inverse matrix for each element of the technical coefficients
matrix after an increment, it can be demanding for high-dimensional
matrices. Here, we benchmark the base R function and <a href="https://albersonmiranda.github.io/fio/">fio</a>,
as there is no similar function in <a href="https://github.com/pachadotdev/leontief" class="external-link">leontief</a>. For brevity,
we limited the matrix dimensions to 200x200 and the number of
repetitions to 20.</p>
<p>Results shows that {fio} is considerably faster and uses
significantly less memory. For the 100x100 matrix, {fio} used 156.34KB
while Base R used 5.25GB, and for the 200x200 matrix, {fio} used
625.09KB while Base R used 83.73GB. This massive memory difference makes
the Base R implementation impractical for real-world applications,
especially on personal computers with limited memory.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base R function</span></span>
<span><span class="va">field_influence_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, <span class="va">ee</span> <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span>
<span>  <span class="va">I</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">E</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, ncol <span class="op">=</span> <span class="va">n</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">SI</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, ncol <span class="op">=</span> <span class="va">n</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">E</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">=</span> <span class="va">ee</span></span>
<span>      <span class="va">AE</span> <span class="op">=</span> <span class="va">A</span> <span class="op">+</span> <span class="va">E</span></span>
<span>      <span class="va">BE</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">I</span> <span class="op">-</span> <span class="va">AE</span><span class="op">)</span></span>
<span>      <span class="va">FE</span> <span class="op">=</span> <span class="op">(</span><span class="va">BE</span> <span class="op">-</span> <span class="va">B</span><span class="op">)</span> <span class="op">/</span> <span class="va">ee</span></span>
<span>      <span class="va">FEq</span> <span class="op">=</span> <span class="va">FE</span> <span class="op">*</span> <span class="va">FE</span></span>
<span>      <span class="va">S</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">FEq</span><span class="op">)</span></span>
<span>      <span class="va">SI</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">=</span> <span class="va">S</span></span>
<span>      <span class="va">E</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">SI</span><span class="op">)</span> <span class="co"># Added return statement</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># benchmark</span></span>
<span><span class="va">benchmark_d</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  matrix_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">60</span>, <span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">intermediate_transactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">matrix_dim</span><span class="op">^</span><span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="va">matrix_dim</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">total_production</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">4000000</span><span class="op">:</span><span class="fl">6000000</span>, <span class="va">matrix_dim</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      ncol <span class="op">=</span> <span class="va">matrix_dim</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">iom_fio_reduced</span> <span class="op">&lt;-</span> <span class="fu">fio</span><span class="fu">::</span><span class="va"><a href="../reference/iom.html">iom</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>      <span class="st">"iom_reduced"</span>,</span>
<span>      <span class="va">intermediate_transactions</span>,</span>
<span>      <span class="va">total_production</span></span>
<span>    <span class="op">)</span><span class="op">$</span><span class="fu">compute_tech_coeff</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">compute_leontief_inverse</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      fio <span class="op">=</span> <span class="fu">fio</span><span class="fu">:::</span><span class="fu">compute_field_influence</span><span class="op">(</span></span>
<span>        <span class="va">iom_fio_reduced</span><span class="op">$</span><span class="va">technical_coefficients_matrix</span>,</span>
<span>        <span class="va">iom_fio_reduced</span><span class="op">$</span><span class="va">leontief_inverse_matrix</span>,</span>
<span>        <span class="fl">0.001</span></span>
<span>      <span class="op">)</span>,</span>
<span>      `Base R` <span class="op">=</span> <span class="fu">field_influence_r</span><span class="op">(</span></span>
<span>        <span class="va">iom_fio_reduced</span><span class="op">$</span><span class="va">technical_coefficients_matrix</span>,</span>
<span>        <span class="va">iom_fio_reduced</span><span class="op">$</span><span class="va">leontief_inverse_matrix</span></span>
<span>      <span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">20</span>,</span>
<span>      check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running with:</span></span>
<span><span class="co">#&gt;   matrix_dim</span></span>
<span><span class="co">#&gt; 1         30</span></span>
<span><span class="co">#&gt; 2         60</span></span>
<span><span class="co">#&gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.</span></span>
<span><span class="co">#&gt; 3        100</span></span>
<span><span class="co">#&gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.</span></span>
<span><span class="co">#&gt; 4        200</span></span>
<span><span class="co">#&gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">benchmark_d</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 9</span></span>
<span><span class="co">#&gt;   expression matrix_dim      min   median mem_alloc `gc/sec` n_itr  n_gc total_time</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt;      &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;bch:tm&gt;</span></span>
<span><span class="co">#&gt; 1 fio                30   7.81ms   7.87ms  16.67KB     0       20     0   157.31ms</span></span>
<span><span class="co">#&gt; 2 Base R             30  31.95ms  32.67ms  44.52MB     7.61    16     4   525.55ms</span></span>
<span><span class="co">#&gt; 3 fio                60 146.76ms 147.24ms  56.34KB     0       20     0      2.95s</span></span>
<span><span class="co">#&gt; 4 Base R             60 669.46ms 677.64ms  701.2MB     4.13    20    56     13.55s</span></span>
<span><span class="co">#&gt; 5 fio               100    3.02s    3.76s 156.34KB     0       20     0      1.23m</span></span>
<span><span class="co">#&gt; 6 Base R            100    3.94s    4.09s   5.25GB     4.16    20   375       1.5m</span></span>
<span><span class="co">#&gt; 7 fio               200   39.25s   46.28s 625.09KB     0       20     0     16.36m</span></span>
<span><span class="co">#&gt; 8 Base R            200   46.52s   47.17s  83.73GB     6.92    20  6550     15.77m</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">benchmark_d</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figure/benchmark_m1_d-1.png" alt="\label{fig:benchmark_d} Across all matrix sizes, {fio} demonstrates superior performance, being considerably faster and more memory-efficient than the Base R implementation."><p class="caption">
Across all matrix sizes, {fio} demonstrates superior performance, being
considerably faster and more memory-efficient than the Base R
implementation.
</p>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>Or equivalently, multiplying the intermediate
transactions matrix by a diagonal matrix constructed from the total
production vector.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Alberson da Silva Miranda.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
